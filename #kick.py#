import os
import random
import discord
from dotenv import load_dotenv
import json
import re
import sys
import time
import aiohttp

load_dotenv()
TOKEN = os.getenv('DISCORD_TOKEN')
client = discord.Client()

@client.event
async def on_ready():

    """
    This function will start once the bot is ready, using the client.event decorator
    and the on_ready() function. 
    It will display information about the bot itself, the server and the programmer
    """
    title = '''
     _  _     ___    __  .______    _______   __       _______.  ______   ______   .______       _______  .______     ______   .___________.
| || |   |__ \  |  | |   _  \  |       \ |  |     /       | /      | /  __  \  |   _  \     |       \ |   _  \   /  __  \  |           |
| || |_     ) | |  | |  |_)  | |  .--.  ||  |    |   (----`|  ,----'|  |  |  | |  |_)  |    |  .--.  ||  |_)  | |  |  |  | `---|  |----`
|__   _|   / /  |  | |   ___/  |  |  |  ||  |     \   \    |  |     |  |  |  | |      /     |  |  |  ||   _  <  |  |  |  |     |  |     
   | |    / /_  |  | |  |      |  '--'  ||  | .----)   |   |  `----.|  `--'  | |  |\  \----.|  '--'  ||  |_)  | |  `--'  |     |  |     
   |_|   |____| |__| | _|      |_______/ |__| |_______/     \______| \______/  | _| `._____||_______/ |______/   \______/      |__|     
                                                                                                                                        
    '''

    # bot log in information
    print('\nLogged in as {}, id: {} | Servers: {} | Users: {}'.format(client.user.name,
                                                                     client.user.id,
                                                                     len(client.guilds),
                                                                     len(set(client.get_all_members()))) + ' users')    # bot python information
    print('\nDiscord.py version: {}'.format(discord.__version__))
    #liks
    print(client.get_all_members())
    INVITE = 'PUT HERE THE LINK TO INVITE THE BOT'
t.user.name))
    print(INVITE)
    REPO = 'https://github.com/sonuishaq67/42ipdiscordbot'
    print('\nGitHub repository: {}'.format(REPO))
    # Setting `Listening ` status
    for guild in client.guilds:
           for member in guild.members:
               print(member) # or do whatever you wish with the member detail
#    channel=client.get_channel(744840774759481345)
#    msg = await channel.history().get(author__name='superuser')
#    print(msg)
    for guilds in client.guilds:
        for channel in guilds.channels:
            if str(channel.type).strip() == 'text':
                print(channel) 

    await client.change_presence(activity=discord.Activity(type=discord.ActivityType.watching, name="you all :)"))


if __name__ == '__main__':
    client.run(TOKEN)